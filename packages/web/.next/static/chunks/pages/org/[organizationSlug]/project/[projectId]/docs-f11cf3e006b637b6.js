(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{3880:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[organizationSlug]/project/[projectId]/docs",function(){return a(1498)}])},5570:function(e,t,a){"use strict";var r=a(2322);a(2784);var n=a(9097),s=a.n(n);t.Z=e=>{let{title:t,description:a,children:n,breadcrumbs:o=[]}=e;return(0,r.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"w-64 bg-white shadow-sm fixed h-full",children:[(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Project Manager"})}),(0,r.jsx)("nav",{className:"p-4",children:(0,r.jsxs)("ul",{className:"space-y-2",children:[(0,r.jsx)("li",{children:(0,r.jsx)(s(),{href:"/dashboard",className:"flex items-center p-2 rounded-md hover:bg-gray-100",children:(0,r.jsx)("span",{className:"ml-2",children:"Dashboard"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(s(),{href:"/organizations",className:"flex items-center p-2 rounded-md hover:bg-gray-100",children:(0,r.jsx)("span",{className:"ml-2",children:"Organiza\xe7\xf5es"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(s(),{href:"/settings",className:"flex items-center p-2 rounded-md hover:bg-gray-100",children:(0,r.jsx)("span",{className:"ml-2",children:"Configura\xe7\xf5es"})})})]})})]}),(0,r.jsxs)("main",{className:"flex-1 ml-64 p-8",children:[o.length>0&&(0,r.jsx)("nav",{className:"mb-4",children:(0,r.jsx)("ol",{className:"flex text-sm text-gray-500",children:o.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,r.jsx)("span",{className:"mx-2",children:"/"}),t===o.length-1?(0,r.jsx)("span",{className:"text-gray-700 font-medium",children:e.label}):(0,r.jsx)(s(),{href:e.href,className:"hover:text-primary",children:e.label})]},t))})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t}),a&&(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:a})]}),n]})]})}},3734:function(e,t,a){"use strict";a.d(t,{bZ:function(){return ui_Alert},zx:function(){return d},$j:function(){return ui_Spinner},mQ:function(){return Tabs},nU:function(){return TabsContent},dr:function(){return TabsList},SP:function(){return TabsTrigger}});var r=a(2322),n=a(2784),s=a(929),o=a(489),c=a(324);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.m6)((0,o.W)(t))}let l=(0,s.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=(0,n.forwardRef)((e,t)=>{let{className:a,variant:n,size:s,asChild:o=!1,...c}=e;return(0,r.jsx)("button",{className:cn(l({variant:n,size:s,className:a})),ref:t,...c})});i.displayName="Button";var d=i;let u=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-yellow-500/50 text-yellow-700 dark:border-yellow-500 [&>svg]:text-yellow-600",success:"border-green-500/50 text-green-700 dark:border-green-500 [&>svg]:text-green-600"}},defaultVariants:{variant:"default"}});var ui_Alert=e=>{let{className:t,variant:a,title:n,description:s,children:o,...c}=e;return(0,r.jsxs)("div",{role:"alert",className:cn(u({variant:a}),t),...c,children:[n&&(0,r.jsx)("h5",{className:"mb-1 font-medium leading-none tracking-tight",children:n}),s&&(0,r.jsx)("div",{className:"text-sm opacity-90",children:s}),o]})},ui_Spinner=e=>{let{size:t="md",className:a}=e;return(0,r.jsx)("div",{className:cn("animate-spin rounded-full border-solid border-gray-300 border-t-primary",{sm:"h-4 w-4 border-2",md:"h-8 w-8 border-3",lg:"h-12 w-12 border-4"}[t],a)})};let m=(0,n.createContext)(void 0),useTabs=()=>{let e=(0,n.useContext)(m);if(!e)throw Error("Tabs compound components must be used within a Tabs component");return e},Tabs=e=>{let{children:t,defaultValue:a,value:s,onValueChange:o,className:c=""}=e,[l,i]=(0,n.useState)(a);return(0,r.jsx)(m.Provider,{value:{value:void 0!==s?s:l,onValueChange:e=>{void 0===s&&i(e),null==o||o(e)}},children:(0,r.jsx)("div",{className:"tabs ".concat(c),children:t})})},TabsList=e=>{let{children:t,className:a=""}=e;return(0,r.jsx)("div",{className:"flex border-b ".concat(a),children:t})},TabsTrigger=e=>{let{children:t,value:a,className:n="",disabled:s=!1}=e,{value:o,onValueChange:c}=useTabs(),l=o===a;return(0,r.jsx)("button",{type:"button",role:"tab",className:"px-4 py-2 text-sm font-medium ".concat(l?"border-b-2 border-primary text-primary":"text-gray-500 hover:text-gray-700 hover:border-gray-300"," ").concat(n," ").concat(s?"opacity-50 cursor-not-allowed":""),onClick:()=>!s&&c(a),disabled:s,"aria-selected":l,children:t})},TabsContent=e=>{let{children:t,value:a,className:n=""}=e,{value:s}=useTabs();return s!==a?null:(0,r.jsx)("div",{role:"tabpanel",className:n,children:t})}},1498:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return docs}});var r=a(2322),n=a(2784),s=a(5632),o=a(7729),c=a.n(o),l=a(418),i=a(3734),components_DocumentationTree=e=>{let{projectId:t,organizationSlug:a,collectionId:s,onSelectDocument:o}=e,[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(new Set),[x,h]=(0,n.useState)(!0),[f,g]=(0,n.useState)(null),[p,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{let fetchDocuments=async()=>{try{h(!0);let e=await l.Z.get("/api/outline/collections/".concat(s,"/documents"));if(e.data.success){let t=e.data.data,a=organizeDocuments(t);if(d(a),a.length>0){let e=new Set(u);a.forEach(t=>e.add(t.id)),m(e)}}else throw Error("Erro ao carregar documentos")}catch(e){g("N\xe3o foi poss\xedvel carregar a estrutura de documentos.")}finally{h(!1)}};fetchDocuments()},[s]);let organizeDocuments=e=>{let t=new Map;e.forEach(e=>{t.set(e.id,{id:e.id,title:e.title,url:e.url,parentId:e.parentDocumentId,children:[]})});let a=[];return t.forEach(e=>{if(e.parentId&&t.has(e.parentId)){let a=t.get(e.parentId);a.children.push(e)}else a.push(e)}),a.sort((e,t)=>e.title.localeCompare(t.title))},toggleExpand=e=>{let t=new Set(u);u.has(e)?t.delete(e):t.add(e),m(t)},handleCreateDocument=async e=>{try{let t=prompt("Nome do documento:");if(!t)return;let a=await l.Z.post("/api/outline/documents",{title:t,collectionId:s,parentDocumentId:e||null,text:"# ".concat(t,"\n\nAdicione seu conte\xfado aqui...")});if(a.data.success){let r=await l.Z.get("/api/outline/collections/".concat(s,"/documents"));if(r.data.success){let n=r.data.data,s=organizeDocuments(n);if(d(s),e){let t=new Set(u);t.add(e),m(t)}o(a.data.data.id,t),v(a.data.data.id)}}}catch(e){alert("N\xe3o foi poss\xedvel criar o documento. Tente novamente.")}},renderDocument=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=u.has(e.id),s=e.children&&e.children.length>0;return(0,r.jsxs)("div",{style:{marginLeft:"".concat(12*a,"px")},children:[(0,r.jsxs)("div",{className:"flex items-center py-1 px-2 rounded-md hover:bg-gray-100 cursor-pointer group\n            ".concat(p===e.id?"bg-blue-50 text-blue-600":""),children:[(0,r.jsx)("div",{className:"mr-1 w-5 h-5 flex items-center justify-center",onClick:()=>s&&toggleExpand(e.id),children:s?n?"▼":"►":(0,r.jsx)("span",{className:"w-4"})}),(0,r.jsx)("div",{className:"mr-2 text-gray-500",children:s?"\uD83D\uDCC1":"\uD83D\uDCC4"}),(0,r.jsx)("div",{className:"flex-grow truncate",onClick:()=>{v(e.id),o(e.id,e.title)},children:e.title}),(0,r.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100",children:[(0,r.jsx)("button",{className:"p-1 rounded-sm hover:bg-gray-200",onClick:()=>handleCreateDocument(e.id),title:"Adicionar sub-documento",children:"➕"}),(0,r.jsx)("button",{className:"p-1 rounded-sm hover:bg-gray-200",onClick:e=>{e.stopPropagation()},title:"Mais a\xe7\xf5es",children:"⋯"})]})]}),n&&s&&(null===(t=e.children)||void 0===t?void 0:t.map(e=>renderDocument(e,a+1)))]},e.id)};return x?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)(i.$j,{size:"md"})}):f?(0,r.jsx)("div",{className:"text-red-500 p-4",children:f}):(0,r.jsxs)("div",{className:"documentation-tree bg-white rounded-md border p-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[(0,r.jsx)("h3",{className:"font-medium text-sm",children:"Documentos"}),(0,r.jsx)(i.zx,{variant:"ghost",size:"sm",onClick:()=>handleCreateDocument(),className:"h-7 px-2",children:"➕ Novo"})]}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-200px)]",children:0===c.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm p-2",children:'Nenhum documento encontrado. Crie o primeiro documento clicando no bot\xe3o "Novo".'}):c.map(e=>renderDocument(e))})]})},components_DocumentationViewer=e=>{let{projectId:t,organizationSlug:a}=e,[s,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[p,v]=(0,n.useState)(null),[j,b]=(0,n.useState)(""),[y,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let fetchDocumentationInfo=async()=>{try{o(!0),d(null);let e=await l.Z.get("/api/documentation/".concat(a,"/projects/").concat(t));if(e.data.success&&e.data.data){h(e.data.data.id),g(!0);let t=await l.Z.get("/api/outline/auth-url?organizationSlug=".concat(a,"&collectionId=").concat(e.data.data.id));t.data.success&&m(t.data.data.authUrl)}else g(!1)}catch(t){var e;g(!1),(null===(e=t.response)||void 0===e?void 0:e.status)!==404&&d("N\xe3o foi poss\xedvel carregar a documenta\xe7\xe3o. Tente novamente mais tarde.")}finally{o(!1)}};fetchDocumentationInfo()},[t,a]);let handleCreateDocumentation=async()=>{try{o(!0),d(null);let e=await l.Z.get("/api/projects/".concat(t));if(!e.data.success)throw Error("N\xe3o foi poss\xedvel obter informa\xe7\xf5es do projeto");let r=e.data.data,n=await l.Z.post("/api/documentation/".concat(a,"/projects/").concat(t),{projectName:r.name});if(n.data.success){h(n.data.data.collection.id),g(!0);let e=await l.Z.get("/api/outline/auth-url?organizationSlug=".concat(a,"&collectionId=").concat(n.data.data.collection.id));e.data.success&&m(e.data.data.authUrl)}else throw Error(n.data.message||"Falha ao criar documenta\xe7\xe3o")}catch(e){d(e.message||"N\xe3o foi poss\xedvel criar a documenta\xe7\xe3o. Tente novamente mais tarde.")}finally{o(!1)}},handleSyncPermissions=async()=>{try{o(!0);let e=await l.Z.post("/api/documentation/".concat(a,"/projects/").concat(t,"/sync-permissions"));if(e.data.success);else throw Error(e.data.message||"Falha ao sincronizar permiss\xf5es")}catch(e){d("N\xe3o foi poss\xedvel sincronizar as permiss\xf5es. Tente novamente mais tarde.")}finally{o(!1)}},handleSelectDocument=async(e,t)=>{try{N(!0),v({id:e,title:t});let a=await l.Z.get("/api/outline/documents/".concat(e));if(a.data.success){let e=a.data.data.text||"";b(e)}else b("N\xe3o foi poss\xedvel carregar o conte\xfado do documento.")}catch(e){b("Erro ao carregar o conte\xfado do documento.")}finally{N(!1)}};return s?(0,r.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,r.jsx)(i.$j,{size:"lg"})}):c?(0,r.jsx)(i.bZ,{variant:"destructive",title:"Erro ao carregar documenta\xe7\xe3o",description:c}):f?(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4 p-2 bg-gray-50 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Documenta\xe7\xe3o do Projeto"}),(0,r.jsx)(i.zx,{variant:"outline",size:"sm",onClick:handleSyncPermissions,children:"Sincronizar Permiss\xf5es"})]}),(0,r.jsxs)("div",{className:"flex-grow overflow-hidden flex border rounded-lg",children:[(0,r.jsx)("div",{className:"w-1/4 border-r overflow-auto",children:x&&(0,r.jsx)(components_DocumentationTree,{projectId:t,organizationSlug:a,collectionId:x,onSelectDocument:handleSelectDocument})}),(0,r.jsx)("div",{className:"w-3/4 overflow-auto",children:p?(0,r.jsx)("div",{className:"p-4",children:y?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)(i.$j,{size:"md"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:p.title}),(0,r.jsx)("div",{className:"prose max-w-none",children:j?(e=>{let t=e.split("\n");return(0,r.jsx)("div",{className:"markdown",children:t.map((e,t)=>{if(e.startsWith("#")){var a;let n=(null===(a=e.match(/^#+/))||void 0===a?void 0:a[0].length)||1,s=e.replace(/^#+\s+/,""),o="h".concat(Math.min(n,6));return(0,r.jsx)(o,{className:"font-bold my-3",children:s},t)}if(e.match(/^\s*[-*+]\s+/)){let a=e.replace(/^\s*[-*+]\s+/,"");return(0,r.jsx)("li",{className:"ml-6",children:a},t)}return((e.includes("**")||e.includes("__"))&&(e=(e=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")).replace(/__(.*?)__/g,"<strong>$1</strong>")),(e.includes("*")||e.includes("_"))&&(e=(e=e.replace(/\*(.*?)\*/g,"<em>$1</em>")).replace(/_(.*?)_/g,"<em>$1</em>")),e.includes("[")&&e.includes("]")&&e.includes("(")&&e.includes(")")&&(e=e.replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" class="text-blue-600 hover:underline">$1</a>')),""===e.trim())?(0,r.jsx)("br",{},t):(0,r.jsx)("p",{className:"my-2",dangerouslySetInnerHTML:{__html:e}},t)})})})(j):(0,r.jsx)("p",{className:"text-gray-500",children:"Selecione um documento para ver seu conte\xfado."})})]})}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center h-full p-4 text-gray-500",children:(0,r.jsx)("p",{children:"Selecione um documento na \xe1rvore ao lado para ver seu conte\xfado."})})})]})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-96 space-y-4 p-6 border rounded-lg",children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:"Documenta\xe7\xe3o n\xe3o configurada"}),(0,r.jsx)("p",{className:"text-center text-gray-600 max-w-md",children:"Este projeto ainda n\xe3o possui documenta\xe7\xe3o integrada com o Outline. Clique no bot\xe3o abaixo para criar uma \xe1rea de documenta\xe7\xe3o para este projeto."}),(0,r.jsx)(i.zx,{onClick:handleCreateDocumentation,children:"Criar Documenta\xe7\xe3o"})]})},d=a(5570),docs=()=>{let e=(0,s.useRouter)(),{organizationSlug:t,projectId:a}=e.query;return t&&a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Documenta\xe7\xe3o | Projeto"})}),(0,r.jsx)(d.Z,{title:"Documenta\xe7\xe3o",breadcrumbs:[{label:"Organiza\xe7\xf5es",href:"/organizations"},{label:t,href:"/org/".concat(t)},{label:"Projetos",href:"/org/".concat(t,"/projects")},{label:"Documenta\xe7\xe3o",href:"/org/".concat(t,"/project/").concat(a,"/docs")}],children:(0,r.jsx)("div",{className:"h-[calc(100vh-12rem)]",children:(0,r.jsx)(components_DocumentationViewer,{projectId:a,organizationSlug:t})})})]}):(0,r.jsx)(d.Z,{title:"Carregando...",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,r.jsx)("p",{children:"Carregando..."})})})}}},function(e){e.O(0,[774,949,905,888,179],function(){return e(e.s=3880)}),_N_E=e.O()}]);